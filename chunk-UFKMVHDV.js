import{a as ee,b as B}from"./chunk-YFWCBVDS.js";import{A as f,B as T,C as H,D,F as y,H as S,I as b,K as U,L as P,M as d,O as g,P as G,S as J,T as I,U as A,X as Q,Z as c,_ as K,a as h,aa as L,b as v,d as $,ea as X,f as N,g as _,ga as Y,h as x,ja as Z,m as l,o as a,p as m,q as F,s as C,t as w,u as z,v as R,w as j,x as p,y as u,z as o}from"./chunk-XKDOSFUU.js";var M=class n{class=c("");value=c.required({transform:i=>i<0?0:i>100?100:i});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-progressbar"]],hostVars:2,hostBindings:function(e,t){e&2&&P("flex bg-white p-1 h-4 items-center rounded-full dark:bg-blue-850 "+t.class)},inputs:{class:[1,"class"],value:[1,"value"]},decls:1,vars:2,consts:[[1,"bg-purple-600","flex","h-2","rounded-full"]],template:function(e,t){e&1&&D(0,"div",0),e&2&&U("width",t.value()+"%")},encapsulation:2})};var ie=(n,i,e,t,r,s)=>({"bg-red-500":n,"bg-green-500":i,"bg-grey-50":e,"text-white":t,"text-grey-500":r,"bg-purple-600":s});function ne(n,i){n&1&&f(0,"img",3)}function re(n,i){n&1&&f(0,"img",4)}var V=(s=>(s[s.Normal=0]="Normal",s[s.Correct=1]="Correct",s[s.Wrong=2]="Wrong",s[s.Answer=3]="Answer",s[s.Selected=4]="Selected",s))(V||{}),k=class n{option=c.required();description=c.required();status=c(0);get hostClasses(){let i="flex flex-row gap-4 p-4 bg-white rounded-xl items-center hover:outline-2 hover:outline-purple-600 hover:cursor-pointer group dark:bg-blue-850",e="";switch(this.status()){case 2:e="outline-2 outline-red-500";break;case 1:e="outline-2 outline-green-500";break;case 4:e="outline-2 outline-purple-600";break}return`${i} ${e}`}Status=V;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-question-option"]],hostVars:2,hostBindings:function(e,t){e&2&&P(t.hostClasses)},inputs:{option:[1,"option"],description:[1,"description"],status:[1,"status"]},decls:7,vars:11,consts:[[1,"rounded-md","size-10","flex","items-center","justify-center","group-hover:bg-purple-600","p-4","group-hover:text-white",3,"ngClass"],[1,"text-blue-900","dark:text-white"],[1,"ml-auto"],["src","./assets/images/icon-correct.svg","width","40","height","40","alt","correct icon",1,"size-6","md:size-[1.875rem]"],["src","./assets/images/icon-error.svg","width","40","height","40","alt","error icon",1,"size-6","md:size-[1.875rem]"]],template:function(e,t){e&1&&(u(0,"p",0),d(1),o(),u(2,"p",1),d(3),o(),u(4,"div",2),C(5,ne,1,0,"img",3)(6,re,1,0,"img",4),o()),e&2&&(p("ngClass",J(4,ie,t.status()===t.Status.Wrong,t.status()===t.Status.Correct,t.status()===t.Status.Normal||t.status()===t.Status.Answer,t.status()===t.Status.Wrong||t.status()===t.Status.Correct||t.status()===t.Status.Selected,t.status()===t.Status.Normal||t.status()===t.Status.Answer,t.status()===t.Status.Selected)),a(),g(" ",t.option(),`
`),a(2),g(" ",t.description(),`
`),a(2),w(t.status()===t.Status.Answer||t.status()===t.Status.Correct?5:t.status()===t.Status.Wrong?6:-1))},dependencies:[K],encapsulation:2})};var E=class n{transform(i){switch(i){case 0:return"A";case 1:return"B";case 2:return"C";case 3:return"D";default:return""}}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=F({name:"option",type:n,pure:!0})};var q=class n{err=c.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-error-msg"]],inputs:{err:[1,"err"]},decls:4,vars:1,consts:[[1,"flex","flex-row","gap-2","items-center"],["src","./assets/images/icon-error.svg","width","40","height","40","alt","error icon",1,"size-6","md:size-8"],[1,"text-lg","md:text-2xl","md:font-normal","text-red-500"]],template:function(e,t){e&1&&(T(0,"div",0),D(1,"img",1),T(2,"p",2),d(3),H()()),e&2&&(a(3),g(" ",t.err()," "))},encapsulation:2})};function se(n,i){if(n&1){let e=y();u(0,"app-question-option",11),I(1,"option"),S("click",function(){let r=_(e).$index,s=b();return x(s.onOptionClick(s.currentQuestion(),r))}),o()}if(n&2){let e=i.$implicit,t=i.$index,r=b();p("option",A(1,3,t))("description",e.option)("status",r.currentQuestion()().submitted?e.selected?e.isAnswer?r.Status.Correct:r.Status.Wrong:e.isAnswer?r.Status.Answer:r.Status.Normal:e.selected?r.Status.Selected:r.Status.Normal)}}function oe(n,i){if(n&1){let e=y();u(0,"app-button",12),S("click",function(){_(e);let r=b();return x(r.toScorePage())}),o()}n&2&&p("text","Check Result")}function ae(n,i){if(n&1){let e=y();u(0,"app-button",12),S("click",function(){_(e);let r=b();return x(r.submit(r.currentQuestion()))}),o()}n&2&&p("text","Submit Answer")}function ue(n,i){if(n&1){let e=y();u(0,"app-button",12),S("click",function(){_(e);let r=b();return x(r.nextQuestion())}),o()}n&2&&p("text","Next Question")}function le(n,i){n&1&&f(0,"app-error-msg",10),n&2&&p("err",i)}var te=class n{Status=V;activatedRoute=N(X);router=N(Y);service=N(Z);error=new $;error$=this.error.asObservable();category=l("");title=l("");icon=l("");questions=l(void 0);currentQuestion=Q(()=>{let i=this.questions(),e=l({question:"",options:[],answer:"",submitted:!1,selected:!1,correct:void 0});if(!i||i.length===0)return e;let t=this.currentIndex();return t>=0&&t<i.length?i[t]:e});currentIndex=l(0);currentNumber=Q(()=>this.currentIndex()+1);currentProgress=Q(()=>this.currentNumber()*10);lastSubmittedQuestion=Q(()=>this.currentNumber()===this.questions()?.length&&this.currentQuestion()().submitted);selectedOption=l({option:"",selected:!1,isAnswer:!1});correctQuestions=0;constructor(){this.activatedRoute.params.pipe(B()).subscribe(e=>{let t=e.category;this.category.set(t)}),this.service.getCategoryQuestions(this.category()).pipe(B()).subscribe({next:e=>{this.title.set(e.title),this.icon.set(e.icon);let t=e.questions.map(r=>l({question:r.question,answer:r.answer,options:r.options.map(s=>({option:s,selected:!1,isAnswer:r.answer===s})),submitted:!1,selected:!1,correct:void 0}));this.questions.set(t),this.questions.length>0&&this.currentIndex.set(0),console.log(this.questions()?.length)},error:e=>{console.log(e)}});let i=this.service.getCategoryItem(this.category());this.service.selectedCategory.next(i)}ngOnDestroy(){this.service.selectedCategory.next(null)}submit(i){i().selected?(i.update(e=>v(h({},e),{submitted:!0})),i().selected&&i().submitted&&i().correct&&this.correctQuestions++):this.error.next("Please select an answer")}onOptionClick(i,e){this.error.next(null),!i().submitted&&i.update(t=>{let r=t.options.map(s=>v(h({},s),{selected:!1}));return r[e]=v(h({},r[e]),{selected:!0}),this.selectedOption.set(r[e]),v(h({},t),{submitted:!1,selected:!0,correct:this.selectedOption().selected&&this.selectedOption().isAnswer,options:r})})}nextQuestion(){let i=this.currentIndex()+1;i<0||i>this.questions().length-1||this.currentIndex.update(e=>e+1)}toScorePage(){this.router.navigate(["/score"],{queryParams:{category:this.category(),score:this.correctQuestions,total:this.currentNumber()}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-questions-page"]],decls:17,vars:8,consts:[[1,"py-8","flex","flex-col","gap-10","lg:flex-row","lg:gap-32"],[1,"flex","flex-col","lg:w-2/5"],[1,"mb-4","text-grey-500","dark:text-blue-300","sm:mb-6"],[1,"mb-6","text-blue-900","dark:text-white","sm:mb-10"],[1,"lg:mt-auto","lg:mb-24",3,"value"],[1,"flex","flex-col","gap-4","sm:gap-6","lg:w-3/5"],[3,"option","description","status"],[1,"flex","flex-col","items-center","gap-4","md:gap-8"],[1,"w-full"],[3,"text"],[3,"err"],[3,"click","option","description","status"],[3,"click","text"]],template:function(e,t){if(e&1&&(u(0,"article",0)(1,"header",1)(2,"small",2),d(3),o(),u(4,"p",3),d(5),o(),f(6,"app-progressbar",4),o(),u(7,"section",5),R(8,se,2,5,"app-question-option",6,z),u(10,"section",7)(11,"div",8),C(12,oe,1,1,"app-button",9)(13,ae,1,1,"app-button",9)(14,ue,1,1,"app-button",9),o(),C(15,le,1,1,"app-error-msg",10),I(16,"async"),o()()()),e&2){let r,s;a(3),G(" Question ",t.currentNumber()," of ",(r=t.questions())==null?null:r.length," "),a(2),g(" ",t.currentQuestion()().question," "),a(),p("value",t.currentProgress()),a(2),j(t.currentQuestion()().options),a(4),w(t.lastSubmittedQuestion()?12:t.currentQuestion()().submitted?14:13),a(3),w((s=A(16,6,t.error$))?15:-1,s)}},dependencies:[M,k,ee,q,E,L],encapsulation:2})};export{te as QuestionsPage};
